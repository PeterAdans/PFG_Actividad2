<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

  <!-- Título dinámico -->
  <title th:text="${session.cuenta == null} ? 'Introduce tu cuenta — Tu Banco' : 'Menú Principal — Tu Banco'">
    Tu Banco
  </title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>

  <style>
    :root{
      --brand:#4c1d95;      /* indigo oscuro */
      --brand-2:#6d28d9;    /* morado acento */
    }
    body { background-color:#f8f9fa; }
    .card { border-radius:16px; overflow:hidden; }
    .card-header{
      color:#fff;
      background: linear-gradient(90deg, var(--brand), var(--brand-2));
    }
    .card-footer { background:#f1f4f9; color:#6c757d; }
    .muted { color:#6c757d; }

    /* Botón primario con tono profesional (indigo) */
    .btn-primary{
      background-color: var(--brand);
      border-color: var(--brand);
    }
    .btn-primary:hover{
      background-color: #5b21b6;  /* un paso más claro */
      border-color: #5b21b6;
    }
  </style>
</head>
<body>

<div class="container py-5">
  <div class="card shadow-lg mx-auto" style="max-width: 840px;">
    <div class="card-header text-center">
      <!-- Encabezado dinámico -->
      <h2 class="mb-0" th:text="${session.cuenta == null} ? 'Introduce tu cuenta' : 'Menú Principal'">
        Introduce tu cuenta
      </h2>
    </div>

    <div class="card-body">
      <!-- Mensaje flash -->
      <div th:if="${mensaje}" class="alert alert-info text-center" th:text="${mensaje}"></div>

      <!-- ======= SIN SESIÓN: formulario de acceso ======= -->
      <section th:if="${session.cuenta == null}">
        <p class="text-center muted mb-4">Introduce tu número de cuenta para empezar a operar</p>

        <form th:action="@{/login}" method="post" autocomplete="off" class="mx-auto" style="max-width: 520px;">
          <div class="mb-3">
            <label for="idCuenta" class="form-label">Número de cuenta</label>
            <input id="idCuenta" name="idCuenta" type="number" min="1" step="1"
                   class="form-control form-control-lg" placeholder= "ID de cuenta (p. ej., 1000)" required />
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-primary btn-lg">Acceder</button>
          </div>
        </form>

        <hr class="my-4">
        <div class="text-center muted">
          <small>Una vez accedas, podrás ingresar, extraer, transferir y ver tus movimientos.</small>
        </div>
      </section>

      <!-- ======= CON SESIÓN: resumen + acciones ======= -->
      <section th:if="${session.cuenta != null}">
        <h3 class="text-center mt-2">
          Bienvenido, cuenta:
          <span class="text-primary fw-bold" th:text="${session.cuenta.idCuenta}"></span>
        </h3>

        <p class="text-center mt-3 fs-5">
          Saldo actual:
          <span class="text-success fw-bold" th:text="${session.cuenta.saldo}"></span>
          <span class="muted">€</span>
        </p>

        <div class="d-flex flex-column align-items-center mt-4 gap-2 w-100">
          <a th:href="@{/ingresar}"    class="btn btn-success  w-50">Ingresar</a>
          <a th:href="@{/extraer}"     class="btn btn-warning  w-50">Extraer</a>
          <a th:href="@{/movimientos}" class="btn btn-info     w-50 text-white">Ver Movimientos</a>
          <a th:href="@{/transferir}"  class="btn btn-primary  w-50">Transferir</a>
          <a th:href="@{/logout}"      class="btn btn-secondary w-50">Cerrar sesión</a>
        </div>
      </section>

    </div>

    <div class="card-footer text-center">
      © 2025 Tu Banco. Todos los derechos reservados.
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
